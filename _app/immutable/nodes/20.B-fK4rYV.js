import{f as W,a as m,e as O,c as st}from"../chunks/BFubLEBJ.js";import{p as ot,au as N,Q as Fe,g as e,a as nt,c as r,f as Q,b as E,s as a,t as H,av as A,r as t,aw as Le}from"../chunks/KYNX8LKV.js";import{d as lt,s as Z}from"../chunks/DQL6K-_Z.js";import{i as ee}from"../chunks/B9LVs5TP.js";import{e as J,i as K}from"../chunks/DdfkTvL7.js";import{b as i,r as we,c as Me,d as Re,s as it}from"../chunks/CwbJWop6.js";import{b as vt}from"../chunks/DivdGI2H.js";import{T as re,I as B,R as ce,a as Ve}from"../chunks/PwPIJeWO.js";import{T as ct}from"../chunks/CQg4hqri.js";function dt(se,X){E(X,[...e(X),{type:"sine",frequency:1e3,amplitude:1,dutyCycle:50,phase:0,offset:0,enabled:!0}],!0)}function ut(se,X,$e){var he;const ye=(he=document.querySelector(".waveform-display svg"))==null?void 0:he.outerHTML;if(ye){const ke=new Blob([ye],{type:"image/svg+xml"}),me=URL.createObjectURL(ke),Y=document.createElement("a");Y.href=me,Y.download=`waveform_${e(X)}_${e($e)}Hz.svg`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(me)}}var pt=W('<div class="form-row svelte-195h4xy"><!></div>'),yt=W('<div class="form-row svelte-195h4xy"><!></div> <div class="form-row form-grid svelte-195h4xy"><!> <!></div> <div class="form-row form-grid svelte-195h4xy"><!> <!></div> <!>',1),ht=(se,X)=>E(X,se.target.checked,!0),mt=W('<div class="cursor-control svelte-195h4xy"><input type="range" min="0" max="100" step="0.1" class="cursor-slider svelte-195h4xy"/></div>'),ft=(se,X)=>E(X,se.target.checked,!0),xt=W('<div class="form-row form-grid svelte-195h4xy"><!> <!></div> <div class="form-row svelte-195h4xy"><div class="checkbox-control svelte-195h4xy"><input type="checkbox" id="cursorEnabled" class="svelte-195h4xy"/> <label for="cursorEnabled" class="svelte-195h4xy">Enable Measurement Cursor</label></div> <!></div> <div class="form-row svelte-195h4xy"><div class="checkbox-control svelte-195h4xy"><input type="checkbox" id="compositeMode" class="svelte-195h4xy"/> <label for="compositeMode" class="svelte-195h4xy">Enable Composite Waveform Mode</label></div></div>',1),_t=W('<div class="cursor-measurements svelte-195h4xy"><!> <!></div>'),gt=W('<div class="measurements-grid svelte-195h4xy"><!> <!> <!> <!></div> <!>',1),bt=O('<line x1="0" x2="1" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" class="svelte-195h4xy"></line>'),Ft=O('<line y1="-10" y2="10" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" class="svelte-195h4xy"></line>'),wt=O('<circle r="0.05" fill="#FFFFFF" class="flow-particle svelte-195h4xy"></circle>'),$t=O('<line y1="-10" y2="10" stroke="#FF0000" stroke-width="0.01" stroke-dasharray="0.05 0.05" class="svelte-195h4xy"></line><circle r="0.1" fill="#FF0000" stroke="#FFFFFF" stroke-width="0.02" class="svelte-195h4xy"></circle>',1),kt=O('<g class="grid-lines svelte-195h4xy"><!><!></g><line x1="0" y1="0" x2="1" y2="0" stroke="rgba(255,255,255,0.3)" stroke-width="0.01" class="svelte-195h4xy"></line><path fill="none" stroke-width="0.05" class="waveform-path svelte-195h4xy"></path><g class="current-flow svelte-195h4xy"></g><!>',1),qt=W('<div class="waveform-display svelte-195h4xy"><!></div>'),Ct=W('<div class="waveform-container svelte-195h4xy"><div class="controls-section svelte-195h4xy"><!> <!> <!></div> <div class="display-section svelte-195h4xy"><!></div></div>'),Pt=W('<div class="form-row svelte-195h4xy"><!></div>'),Mt=W('<div><div class="waveform-header svelte-195h4xy"><div class="waveform-title svelte-195h4xy"><div class="checkbox-control svelte-195h4xy"><input type="checkbox" class="svelte-195h4xy"/> <label class="svelte-195h4xy"></label></div></div> <div class="waveform-actions svelte-195h4xy"><button class="remove-button svelte-195h4xy"><span class="button-icon svelte-195h4xy">√ó</span></button></div></div> <div class="waveform-body svelte-195h4xy"><div class="form-row svelte-195h4xy"><!></div> <div class="form-row form-grid svelte-195h4xy"><!> <!></div> <div class="form-row form-grid svelte-195h4xy"><!> <!></div> <!></div></div>'),Vt=W('<div class="composite-controls svelte-195h4xy"><button class="add-waveform-button svelte-195h4xy"><span class="button-icon svelte-195h4xy">+</span> Add Waveform</button> <div class="waveforms-list svelte-195h4xy"></div></div>'),Wt=O('<line x1="0" x2="1" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" class="svelte-195h4xy"></line>'),Tt=O('<line y1="-10" y2="10" stroke="rgba(255,255,255,0.1)" stroke-width="0.01" class="svelte-195h4xy"></line>'),At=O('<path fill="none" stroke-width="0.03" stroke-dasharray="0.1 0.05" opacity="0.7" class="svelte-195h4xy"></path>'),St=O('<circle r="0.05" fill="#FFFFFF" class="flow-particle svelte-195h4xy"></circle>'),Dt=O('<g class="grid-lines svelte-195h4xy"><!><!></g><line x1="0" y1="0" x2="1" y2="0" stroke="rgba(255,255,255,0.3)" stroke-width="0.01" class="svelte-195h4xy"></line><!><path fill="none" stroke="#FFFFFF" stroke-width="0.05" class="waveform-path svelte-195h4xy"></path><g class="current-flow svelte-195h4xy"></g>',1),It=W('<div class="waveform-display svelte-195h4xy"><!></div>'),Lt=W('<div class="composite-container svelte-195h4xy"><!> <!></div>'),Rt=O('<line x1="0" x2="10000" stroke="rgba(255,255,255,0.1)" stroke-width="0.1" class="svelte-195h4xy"></line>'),zt=O('<line y1="0" y2="10" stroke="rgba(255,255,255,0.1)" stroke-width="0.1" class="svelte-195h4xy"></line>'),Et=O('<line y1="0" stroke-width="20" class="svelte-195h4xy"></line><circle r="0.2" class="frequency-point svelte-195h4xy"></circle><text font-size="0.4" fill="#FFFFFF" text-anchor="middle" class="svelte-195h4xy"> </text>',1),Ht=O('<g class="grid-lines svelte-195h4xy"><!><!></g><!>',1),Bt=W('<div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Harmonic Content:</span> <span class="info-value svelte-195h4xy"> </span></div>'),Ot=W('<div class="form-row svelte-195h4xy"><p class="info-text svelte-195h4xy">This view shows the frequency components of your waveform. Sine waves have a single frequency component, while other waveforms contain harmonics at multiples of the fundamental frequency.</p></div> <div class="frequency-display svelte-195h4xy"><!></div> <div class="frequency-info svelte-195h4xy"><div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Fundamental Frequency:</span> <span class="info-value svelte-195h4xy"> </span></div> <!></div>',1),Ut=W('<div class="frequency-container svelte-195h4xy"><!></div>'),jt=W('<div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Duty Cycle:</span> <span class="info-value svelte-195h4xy"> </span></div>'),Gt=W('<div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Components:</span> <span class="info-value svelte-195h4xy"> </span></div>'),Nt=W('<div class="export-options svelte-195h4xy"><div class="export-option svelte-195h4xy"><h3 class="export-option-title svelte-195h4xy">SVG Image</h3> <p class="export-option-description svelte-195h4xy">Download the waveform as an SVG image</p> <button class="action-button svelte-195h4xy"><span class="button-icon svelte-195h4xy">üñºÔ∏è</span> Download SVG</button></div> <div class="export-option svelte-195h4xy"><h3 class="export-option-title svelte-195h4xy">CSV Data</h3> <p class="export-option-description svelte-195h4xy">Download the waveform data as a CSV file</p> <button class="action-button svelte-195h4xy"><span class="button-icon svelte-195h4xy">üìä</span> Download CSV</button></div></div> <div class="export-info svelte-195h4xy"><h3 class="export-info-title svelte-195h4xy">Waveform Information</h3> <div class="info-grid svelte-195h4xy"><div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Waveform Type:</span> <span class="info-value svelte-195h4xy"> </span></div> <div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Frequency:</span> <span class="info-value svelte-195h4xy"> </span></div> <div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Amplitude:</span> <span class="info-value svelte-195h4xy"> </span></div> <div class="info-item svelte-195h4xy"><span class="info-label svelte-195h4xy">Period:</span> <span class="info-value svelte-195h4xy"> </span></div> <!> <!></div></div>',1),Qt=W('<div class="export-container svelte-195h4xy"><!></div>'),Jt=W('<div class="signal-waveform-generator svelte-195h4xy"><!></div>');function oa(se,X){ot(X,!0);const $e=v=>{var n=Ct(),o=r(n),d=r(o);re(d,{title:"Waveform Parameters",icon:"üìà",children:(x,S)=>{var l=yt(),p=Q(l),P=r(p);B(P,{label:"Waveform Type",type:"select",get value(){return e(M)},get options(){return Ae},onChange:h=>E(M,h,!0),tooltip:"Select the type of waveform to generate"}),t(p);var T=a(p,2),k=r(T);B(k,{label:"Frequency",type:"number",get value(){return e(I)},min:"1",max:"100000",step:"1",unit:"Hz",onChange:h=>E(I,h,!0),tooltip:"Frequency of the waveform in Hertz"});var C=a(k,2);B(C,{label:"Amplitude",type:"number",get value(){return e(le)},min:"0.1",max:"20",step:"0.1",unit:"V",onChange:h=>E(le,h,!0),tooltip:"Peak amplitude of the waveform in Volts"}),t(T);var q=a(T,2),y=r(q);B(y,{label:"Phase",type:"number",get value(){return e(fe)},min:"0",max:"360",step:"1",unit:"¬∞",onChange:h=>E(fe,h,!0),tooltip:"Phase shift of the waveform in degrees"});var $=a(y,2);B($,{label:"Offset",type:"number",get value(){return e(xe)},min:"-10",max:"10",step:"0.1",unit:"V",onChange:h=>E(xe,h,!0),tooltip:"DC offset of the waveform in Volts"}),t(q);var _=a(q,2);{var g=h=>{var s=pt(),w=r(s);B(w,{label:"Duty Cycle",type:"number",get value(){return e(de)},min:"1",max:"99",step:"1",unit:"%",onChange:c=>E(de,c,!0),tooltip:"Duty cycle of the square wave or PWM in percent"}),t(s),m(h,s)};ee(_,h=>{(e(M)==="square"||e(M)==="pwm")&&h(g)})}m(x,l)},$$slots:{default:!0}});var u=a(d,2);re(u,{title:"Display Settings",icon:"üîç",children:(x,S)=>{var l=xt(),p=Q(l),P=r(p);B(P,{label:"Time Scale",type:"number",get value(){return e(We)},min:"0.1",max:"10",step:"0.1",unit:"ms/div",onChange:s=>E(We,s,!0),tooltip:"Time scale for the waveform display"});var T=a(P,2);B(T,{label:"Voltage Scale",type:"number",get value(){return e(Te)},min:"0.1",max:"10",step:"0.1",unit:"V/div",onChange:s=>E(Te,s,!0),tooltip:"Voltage scale for the waveform display"}),t(p);var k=a(p,2),C=r(k),q=r(C);we(q),q.__change=[ht,oe],Le(2),t(C);var y=a(C,2);{var $=s=>{var w=mt(),c=r(w);we(c),t(w),vt(c,()=>e(ie),b=>E(ie,b)),m(s,w)};ee(y,s=>{e(oe)&&s($)})}t(k);var _=a(k,2),g=r(_),h=r(g);we(h),h.__change=[ft,L],Le(2),t(g),t(_),H(()=>{Me(q,e(oe)),Me(h,e(L))}),m(x,l)},$$slots:{default:!0}});var F=a(u,2);re(F,{title:"Waveform Measurements",icon:"üìä",children:(x,S)=>{var l=gt(),p=Q(l),P=r(p);ce(P,{label:"Period",get value(){return e(qe)},unit:"ms",precision:3,variant:"default",tooltip:"Time for one complete cycle"});var T=a(P,2);ce(T,{label:"Frequency",get value(){return e(I)},unit:"Hz",precision:1,variant:"default",tooltip:"Number of cycles per second"});var k=a(T,2);ce(k,{label:"Angular Frequency",get value(){return e(Ue)},unit:"rad/s",precision:1,variant:"default",tooltip:"Angular frequency (œâ = 2œÄf)"});var C=a(k,2);ce(C,{label:"Wavelength",get value(){return e(Oe)},unit:"m",precision:2,variant:"default",tooltip:"Wavelength in free space (Œª = c/f)"}),t(p);var q=a(p,2);{var y=$=>{var _=_t(),g=r(_);ce(g,{label:"Cursor Time",get value(){return e(Se)},unit:"ms",precision:3,variant:"success",tooltip:"Time at cursor position"});var h=a(g,2);ce(h,{label:"Cursor Voltage",get value(){return e(De)},unit:"V",precision:3,variant:"success",tooltip:"Voltage at cursor position"}),t(_),m($,_)};ee(q,$=>{e(oe)&&$(y)})}m(x,l)},$$slots:{default:!0}}),t(o);var f=a(o,2),V=r(f);re(V,{title:"Waveform Display",icon:"üìà",children:(x,S)=>{var l=qt(),p=r(l);Ve(p,{width:"100%",height:"400px",get viewBox(){return e(Ie)},zoomable:!0,pannable:!0,gridLines:!0,children:(P,T)=>{var k=kt(),C=Q(k),q=r(C);J(q,16,()=>Array(21),K,(s,w,c)=>{var b=bt();i(b,"y1",-10+c),i(b,"y2",-10+c),i(b,"stroke-dasharray",c===10?"none":"0.01 0.01"),m(s,b)});var y=a(q);J(y,16,()=>Array(11),K,(s,w,c)=>{var b=Ft();i(b,"x1",c*.1),i(b,"x2",c*.1),i(b,"stroke-dasharray",c===0?"none":"0.01 0.01"),m(s,b)}),t(C);var $=a(C,2),_=a($);J(_,20,()=>Array(20),K,(s,w,c)=>{var b=wt();const D=A(()=>e(L)?ne:_e),G=A(()=>Math.floor((e(D).length-1)*(c/20))),te=A(()=>e(D)[e(G)]||{x:0,y:0});Re(b,`animation-delay: ${c*.1}s`),H(()=>{i(b,"cx",e(te).x),i(b,"cy",e(te).y)}),m(s,b)}),t(_);var g=a(_);{var h=s=>{var w=$t(),c=Q(w),b=a(c);H(()=>{i(c,"x1",e(ie)/100),i(c,"x2",e(ie)/100),i(b,"cx",e(ie)/100),i(b,"cy",e(De))}),m(s,w)};ee(g,s=>{e(oe)&&s(h)})}H(s=>{i($,"d",s),i($,"stroke",e(L)?"#00AAFF":"#FF8800")},[()=>`M${(e(L)?ne:_e).map(s=>`${s.x},${s.y}`).join(" L")}`]),m(P,k)},$$slots:{default:!0}}),t(l),m(x,l)},$$slots:{default:!0}}),t(f),t(n),m(v,n)},ye=v=>{var n=Lt(),o=r(n);re(o,{title:"Composite Waveform Editor",icon:"üîÄ",children:(u,F)=>{var f=Vt(),V=r(f);V.__click=[dt,R];var x=a(V,2);J(x,21,()=>e(R),K,(S,l,p)=>{var P=Mt();let T;var k=r(P),C=r(k),q=r(C),y=r(q);we(y),i(y,"id",`wave-${p}`),y.__change=()=>Je(p);var $=a(y,2);i($,"for",`wave-${p}`),$.textContent=`Waveform ${p+1}`,t(q),t(C);var _=a(C,2),g=r(_);g.__click=()=>Qe(p),t(_),t(k);var h=a(k,2),s=r(h),w=r(s);const c=A(()=>!e(l).enabled);B(w,{label:"Type",type:"select",get value(){return e(l).type},get options(){return Ae},onChange:z=>ve(p,"type",z),get disabled(){return e(c)}}),t(s);var b=a(s,2),D=r(b);const G=A(()=>!e(l).enabled);B(D,{label:"Frequency",type:"number",get value(){return e(l).frequency},min:"1",max:"100000",step:"1",unit:"Hz",onChange:z=>ve(p,"frequency",z),get disabled(){return e(G)}});var te=a(D,2);const U=A(()=>!e(l).enabled);B(te,{label:"Amplitude",type:"number",get value(){return e(l).amplitude},min:"0.1",max:"20",step:"0.1",unit:"V",onChange:z=>ve(p,"amplitude",z),get disabled(){return e(U)}}),t(b);var j=a(b,2),ae=r(j);const ue=A(()=>!e(l).enabled);B(ae,{label:"Phase",type:"number",get value(){return e(l).phase},min:"0",max:"360",step:"1",unit:"¬∞",onChange:z=>ve(p,"phase",z),get disabled(){return e(ue)}});var pe=a(ae,2);const Ye=A(()=>!e(l).enabled);B(pe,{label:"Offset",type:"number",get value(){return e(l).offset},min:"-10",max:"10",step:"0.1",unit:"V",onChange:z=>ve(p,"offset",z),get disabled(){return e(Ye)}}),t(j);var Ze=a(j,2);{var et=z=>{var Pe=Pt(),tt=r(Pe);const at=A(()=>!e(l).enabled);B(tt,{label:"Duty Cycle",type:"number",get value(){return e(l).dutyCycle},min:"1",max:"99",step:"1",unit:"%",onChange:rt=>ve(p,"dutyCycle",rt),get disabled(){return e(at)}}),t(Pe),m(z,Pe)};ee(Ze,z=>{(e(l).type==="square"||e(l).type==="pwm")&&z(et)})}t(h),t(P),H(z=>{T=it(P,1,"waveform-item svelte-195h4xy",null,T,z),Me(y,e(l).enabled)},[()=>({disabled:!e(l).enabled})]),m(S,P)}),t(x),t(f),m(u,f)},$$slots:{default:!0}});var d=a(o,2);re(d,{title:"Composite Waveform Preview",icon:"üìà",children:(u,F)=>{var f=It(),V=r(f);Ve(V,{width:"100%",height:"400px",get viewBox(){return e(Ie)},zoomable:!0,pannable:!0,gridLines:!0,children:(x,S)=>{var l=Dt(),p=Q(l),P=r(p);J(P,16,()=>Array(21),K,(y,$,_)=>{var g=Wt();i(g,"y1",-10+_),i(g,"y2",-10+_),i(g,"stroke-dasharray",_===10?"none":"0.01 0.01"),m(y,g)});var T=a(P);J(T,16,()=>Array(11),K,(y,$,_)=>{var g=Tt();i(g,"x1",_*.1),i(g,"x2",_*.1),i(g,"stroke-dasharray",_===0?"none":"0.01 0.01"),m(y,g)}),t(p);var k=a(p,2);J(k,17,()=>e(R),K,(y,$,_)=>{var g=st(),h=Q(g);{var s=w=>{var c=At();const b=A(()=>me(e($).type,e($).frequency,e($).amplitude,e($).dutyCycle,e($).phase,e($).offset));H((D,G)=>{i(c,"d",D),i(c,"stroke",G)},[()=>`M${e(b).map(D=>`${D.x},${D.y}`).join(" L")}`,()=>Y(_)]),m(w,c)};ee(h,w=>{e($).enabled&&w(s)})}m(y,g)});var C=a(k),q=a(C);J(q,20,()=>Array(20),K,(y,$,_)=>{var g=St();const h=A(()=>Math.floor((ne.length-1)*(_/20))),s=A(()=>ne[e(h)]||{x:0,y:0});Re(g,`animation-delay: ${_*.1}s`),H(()=>{i(g,"cx",e(s).x),i(g,"cy",e(s).y)}),m(y,g)}),t(q),H(y=>i(C,"d",y),[()=>`M${ne.map(y=>`${y.x},${y.y}`).join(" L")}`]),m(x,l)},$$slots:{default:!0}}),t(f),m(u,f)},$$slots:{default:!0}}),t(n),m(v,n)},he=v=>{var n=Ut(),o=r(n);re(o,{title:"Frequency Domain Analysis",icon:"üìä",children:(d,u)=>{var F=Ot(),f=a(Q(F),2),V=r(f);Ve(V,{width:"100%",height:"400px",get viewBox(){return e(je)},zoomable:!0,pannable:!0,gridLines:!0,children:(k,C)=>{var q=Ht(),y=Q(q),$=r(y);J($,16,()=>Array(11),K,(h,s,w)=>{var c=Rt();i(c,"y1",w),i(c,"y2",w),i(c,"stroke-dasharray",w===0?"none":"1 1"),m(h,c)});var _=a($);J(_,16,()=>Array(11),K,(h,s,w)=>{var c=zt();i(c,"x1",w*1e3),i(c,"x2",w*1e3),i(c,"stroke-dasharray",w===0?"none":"1 1"),m(h,c)}),t(y);var g=a(y);J(g,17,()=>ge,K,(h,s,w)=>{var c=Et(),b=Q(c),D=a(b),G=a(D),te=r(G);t(G),H((U,j)=>{i(b,"x1",e(s).x),i(b,"x2",e(s).x),i(b,"y2",e(s).y),i(b,"stroke",U),i(D,"cx",e(s).x),i(D,"cy",e(s).y),i(D,"fill",j),i(G,"x",e(s).x),i(G,"y",e(s).y+.5),Z(te,`${e(s).x??""} Hz`)},[()=>e(L)?Y(w%e(R).length):"#FF8800",()=>e(L)?Y(w%e(R).length):"#FF8800"]),m(h,c)}),m(k,q)},$$slots:{default:!0}}),t(f);var x=a(f,2),S=r(x),l=a(r(S),2),p=r(l);t(l),t(S);var P=a(S,2);{var T=k=>{var C=Bt(),q=a(r(C),2),y=r(q,!0);t(q),t(C),H(()=>Z(y,e(M)==="sine"&&!e(L)?"None (pure sine wave)":e(M)==="square"?"Odd harmonics (1/n amplitude)":e(M)==="triangle"?"Odd harmonics (1/n¬≤ amplitude)":e(M)==="sawtooth"?"All harmonics (1/n amplitude)":"Multiple frequency components")),m(k,C)};ee(P,k=>{(e(M)!=="sine"||e(L))&&k(T)})}t(x),H(()=>Z(p,`${e(I)??""} Hz`)),m(d,F)},$$slots:{default:!0}}),t(n),m(v,n)},ke=v=>{var n=Qt(),o=r(n);re(o,{title:"Export Options",icon:"üíæ",children:(d,u)=>{var F=Nt(),f=Q(F),V=r(f),x=a(r(V),4);x.__click=[ut,M,I],t(V);var S=a(V,2),l=a(r(S),4);l.__click=Ke,t(S),t(f);var p=a(f,2),P=a(r(p),2),T=r(P),k=a(r(T),2),C=r(k,!0);t(k),t(T);var q=a(T,2),y=a(r(q),2),$=r(y);t(y),t(q);var _=a(q,2),g=a(r(_),2),h=r(g);t(g),t(_);var s=a(_,2),w=a(r(s),2),c=r(w);t(w),t(s);var b=a(s,2);{var D=U=>{var j=jt(),ae=a(r(j),2),ue=r(ae);t(ae),t(j),H(()=>Z(ue,`${e(de)??""}%`)),m(U,j)};ee(b,U=>{(e(M)==="square"||e(M)==="pwm")&&U(D)})}var G=a(b,2);{var te=U=>{var j=Gt(),ae=a(r(j),2),ue=r(ae,!0);t(ae),t(j),H(pe=>Z(ue,pe),[()=>e(R).filter(pe=>pe.enabled).length]),m(U,j)};ee(G,U=>{e(L)&&U(te)})}t(P),t(p),H(U=>{Z(C,e(L)?"Composite":e(M)),Z($,`${e(I)??""} Hz`),Z(h,`${e(le)??""} V`),Z(c,`${U??""} ms`)},[()=>e(qe).toFixed(3)]),m(d,F)},$$slots:{default:!0}}),t(n),m(v,n)};function me(v,n,o,d,u,F){const f=[],S=1/n*5;for(let l=0;l<1e3;l++){const p=l/1e3*S,P=be(p,v,n,o,d,u,F);f.push({x:p,y:P})}return f}function Y(v){const n=["#FF8800","#00AAFF","#44FF44","#FF44FF","#FFFF00","#FF4444","#44FFFF","#FFFFFF"];return n[v%n.length]}let M=N("sine"),I=N(1e3),le=N(5),de=N(50),fe=N(0),xe=N(0),We=N(1),Te=N(1),oe=N(!1),ie=N(50),L=N(!1),R=N(Fe([{type:"sine",frequency:1e3,amplitude:3,dutyCycle:50,phase:0,offset:0,enabled:!0},{type:"sine",frequency:3e3,amplitude:1,dutyCycle:50,phase:0,offset:0,enabled:!1}]));const Ae=[{value:"sine",label:"Sine Wave"},{value:"square",label:"Square Wave"},{value:"triangle",label:"Triangle Wave"},{value:"sawtooth",label:"Sawtooth Wave"},{value:"pwm",label:"PWM"}],ze=[{id:"waveform",label:"Waveform",icon:"üìà",content:$e},{id:"composite",label:"Composite",icon:"üîÄ",content:ye},{id:"frequency",label:"Frequency Domain",icon:"üìä",content:he},{id:"export",label:"Export",icon:"üíæ",content:ke}];let _e=Fe(Ee()),ne=Fe(He()),ge=Fe(Be());function Ee(){const v=[],d=1/e(I)*5;for(let u=0;u<1e3;u++){const F=u/1e3*d,f=be(F,e(M),e(I),e(le),e(de),e(fe),e(xe));v.push({x:F,y:f})}return v}function be(v,n,o,d,u,F,f){const V=F*Math.PI/180,x=v*o*2*Math.PI+V;switch(n){case"sine":return d*Math.sin(x)+f;case"square":return(x%(2*Math.PI)/(2*Math.PI)<u/100?d:-d)+f;case"triangle":const S=2*Math.abs(x%(2*Math.PI)/(2*Math.PI)-.5)-.5;return d*2*S+f;case"sawtooth":const l=x%(2*Math.PI)/(2*Math.PI)-.5;return d*2*l+f;case"pwm":return(x%(2*Math.PI)/(2*Math.PI)<u/100?d:0)+f;default:return 0}}function He(){if(!e(L))return[];const v=[],n=1e3,u=1/(Math.max(...e(R).filter(F=>F.enabled).map(F=>F.frequency))||1e3)*5;for(let F=0;F<n;F++){const f=F/n*u;let V=0;for(const x of e(R))x.enabled&&(V+=be(f,x.type,x.frequency,x.amplitude,x.dutyCycle,x.phase,x.offset));v.push({x:f,y:V})}return v}function Be(){const v=[];if(e(L)){for(const o of e(R))if(o.enabled){const d=o.amplitude*(o.type==="sine"?1:o.type==="square"?.8:o.type==="triangle"?.6:o.type==="sawtooth"?.7:.5);if(v.push({x:o.frequency,y:d}),o.type!=="sine")for(let u=3;u<=7;u+=2){const F=o.frequency*u;F<1e4&&v.push({x:F,y:d/u})}}}else{const o=e(le)*(e(M)==="sine"?1:e(M)==="square"?.8:e(M)==="triangle"?.6:e(M)==="sawtooth"?.7:.5);if(v.push({x:e(I),y:o}),e(M)!=="sine")for(let d=3;d<=7;d+=2){const u=e(I)*d;u<1e4&&v.push({x:u,y:o/d})}}return v.sort((o,d)=>o.x-d.x),v}const qe=A(()=>1/e(I)*1e3),Oe=A(()=>3e5/e(I)),Ue=A(()=>2*Math.PI*e(I)),Se=A(()=>e(oe)?e(ie)/100*(e(qe)*5):0),De=A(()=>e(oe)?be(e(Se)/1e3,e(M),e(I),e(le),e(de),e(fe),e(xe)):0),Ie=A(Ge),je=A(Ne);function Ge(){const v=e(L)?ne:_e;if(v.length===0)return"0 -10 1 20";const n=0,o=v[v.length-1].x,d=v.map(x=>x.y),u=Math.min(...d),F=Math.max(...d),f=Math.max(F-u,.001),V=f*.2;return`${n} ${-(F+V)} ${o-n} ${f+V*2}`}function Ne(){if(ge.length===0)return"0 0 10000 10";const v=Math.max(...ge.map(o=>o.x))*1.2,n=Math.max(...ge.map(o=>o.y))*1.2;return`0 0 ${v} ${n}`}function Qe(v){E(R,e(R).filter((n,o)=>o!==v),!0)}function ve(v,n,o){E(R,e(R).map((d,u)=>u===v?{...d,[n]:o}:d),!0)}function Je(v){E(R,e(R).map((n,o)=>o===v?{...n,enabled:!n.enabled}:n),!0)}function Ke(){const v=e(L)?ne:_e;let n=`Time (s),Voltage (V)
`;v.forEach(F=>{n+=`${F.x.toFixed(6)},${F.y.toFixed(6)}
`});const o=new Blob([n],{type:"text/csv"}),d=URL.createObjectURL(o),u=document.createElement("a");u.href=d,u.download=`waveform_data_${e(M)}_${e(I)}Hz.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d)}var Ce=Jt(),Xe=r(Ce);ct(Xe,{get tabs(){return ze},variant:"underline",alignment:"stretch",size:"medium"}),t(Ce),m(se,Ce),nt()}lt(["change","click"]);export{oa as component};
